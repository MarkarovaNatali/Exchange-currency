<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Курсы валют</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.7.2/css/all.css">
</head>
<body>
<!-- Блок с основными курсами валют -->
<div class="warning">
    <img src="{{ url_for('static', filename='img/Logotip.png') }}" alt="Логотип">
    <h1>Текущие курсы валют Национального банка Республики Беларусь</h1>
</div>

<form id="updateForm" action="/update" method="post">
    <div class="shadowbox">
        <ul class="list">
            {% for currency in data %}
            {% if currency.Cur_Abbreviation in ['USD', 'EUR', 'RUB'] %}
            <li class="list-item">{{ currency.Cur_Abbreviation }}: {{ currency.Cur_OfficialRate }}</li>
            {% endif %}
            {% endfor %}
        </ul>
        <button class="btn-update" type="submit">
            <i class="fa-solid fa-arrows-spin"></i> Обновить курсы
        </button>
    </div>
</form>

<!-- Блок поиска курса валют -->
<p>Курс
    {% if selected_currency %}
    {{ rate }} Белорусских рублей за {{ scale }} {{ currency_name }}
    {% endif %}
</p>
</div>
<label>Выберите валюту</label>
<form id="getRateForm" action="/get_rate" method="post">
    <select class="select-css" id="currency_byn" name="currency">
        {% for currency in data %}
        <option value="{{ currency.Cur_Abbreviation }}" {% if currency.Cur_Abbreviation== selected_currency %}selected{%
                endif %}>
            {{ currency.Cur_Abbreviation }} {{ currency.Cur_Name }}
        </option>
        {% endfor %}
    </select>
    <button class="btn btn-warning" type="submit">Узнать курс</button>
</form>

<!-- Блок конвертера валют -->
<aside class="k-sidebar">
    <div class="mb-15 pl-15 pr-15 pt-15">
        <div class="h3">
            Конвертер валют
        </div>
    </div>
    <form id="convertForm" action="/convert" method="post">
        <label>Введите сумму:</label>
        <input type="number" name="amount" value="{{ amount }}">
        <label>Выберите валюту:</label>
        <select name="from_currency">
            <option value="BYN" selected>
                BYN
            </option>
            {% for currency in data %}
            <option value="{{ currency.Cur_Abbreviation }}"}>
                {{ currency.Cur_Abbreviation }}
            </option>
            {% endfor %}
        </select>
        <label>Конвертация в:</label>
        <input type="number" name="converted_1" value="{{ converted_1|round(3) }}" readonly>
        <select name="to_currency_1">
            <option value="BYN" selected>
                BYN
            </option>
            {% for currency in data %}
            <option value="{{ currency.Cur_Abbreviation }}" {% if currency.Cur_Abbreviation== to_currency_1 %}selected{%
                    endif %}>
                {{ currency.Cur_Abbreviation }}
            </option>
            {% endfor %}
        </select>
        <input type="number" name="converted_2" value="{{ converted_2|round(3) }}" readonly>
        <select name="to_currency_2">
            <option value="BYN">
                BYN
            </option>
            {% for currency in data %}
            <option value="{{ currency.Cur_Abbreviation }}" {% if currency.Cur_Abbreviation== to_currency_2 %}selected{%
                    endif %}>
                {{ currency.Cur_Abbreviation }}
            </option>
            {% endfor %}
        </select>
        <button type="submit">Конвертировать</button>
    </form>
</aside>
</body>
</html>